---
import Base from "@/layouts/Base.astro";
import MinimalFooter from "@/layouts/partials/MinimalFooter.astro";

const cards = [
  {
    name: "Amazon Rewards Visa",
    url: "/financial-solutions/amazon-rewards-visa-credit-card-benefits",
    reqUrl: "/financial-solutions/amazon-rewards-visa-credit-card-requirements",
    color: "#250E62",
    icon: "ðŸŒŸ",
  },
  {
    name: "Capital One Savor Rewards",
    url: "/financial-solutions/capital-one-savor-rewards-credit-card-benefits",
    reqUrl:
      "/financial-solutions/capital-one-savor-rewards-credit-card-requirements",
    color: "#250E62",
    icon: "ðŸŒŸ",
  },
  {
    name: "Chase Freedom Unlimited",
    url: "/financial-solutions/chase-freedom-unlimited-credit-card-benefits",
    reqUrl: "/financial-solutions/chase-freedom-unlimited-requirements",
    color: "#250E62",
    icon: "ðŸŒŸ",
  },
];

const selectedCard = cards[Math.floor(Math.random() * cards.length)];
const alternateCards = cards.filter((card) => card.name !== selectedCard.name);
---

<Base
  title="Discover Your Ideal Credit Card | BudgetBee"
  meta_title="Credit Card Recommender - Card Reveal | BudgetBee"
  description="Finding the right card is simple. Maximize rewards, organize your spending and enjoy exclusive benefits. Explore and choose the ideal card for you!"
  image="/images/og-image.png"
>
  <section class="section pb-0">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10 text-center">
          <div class="content">
            <h1 class="h2 mb-4">Discover Your Ideal Credit Card</h1>

            <p class="text-left text-lg text-dark mb-5">
              Finding the right card is simple. Maximize rewards, organize your
              spending and enjoy exclusive benefits. Explore and choose the
              ideal card for you!
            </p>

            <!-- Autozep Ad: us_budgetbeepro_1 -->
            <div
              id="us_budgetbeepro_1"
              class="min-w-auto flex justify-center items-center"
            >
            </div>

            <h2 class="text-lg leading-5 font-bold text-gray-800 mb-6">
              Why Choose Our Credit Card Recommender?
            </h2>

            <div class="space-y-1 mb-6">
              <div class="flex items-start">
                <div
                  class="flex-shrink-0 rounded-full bg-orange-500 w-6 h-6 flex items-center justify-center mr-2"
                >
                  <svg
                    class="w-4 h-4 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="text-lg">
                  <span class="ml-2 font-semibold text-dark"
                    >Personalized Options</span
                  >
                </div>
              </div>

              <div class="flex items-start">
                <div
                  class="flex-shrink-0 rounded-full bg-orange-500 w-6 h-6 flex items-center justify-center mr-2"
                >
                  <svg
                    class="w-4 h-4 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="text-lg">
                  <span class="ml-2 font-semibold text-dark"
                    >Completely Free</span
                  >
                </div>
              </div>

              <div class="flex items-start">
                <div
                  class="flex-shrink-0 rounded-full bg-orange-500 w-6 h-6 flex items-center justify-center mr-2"
                >
                  <svg
                    class="w-4 h-4 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
                <div class="text-lg">
                  <span class="ml-2 font-semibold text-dark">Expert Advice</span
                  >
                </div>
              </div>
            </div>

            <div class="primary-recommendation my-8">
              <a
                href={selectedCard.url}
                class="btn btn-primary btn-lg w-full rounded-full inline-flex items-center justify-center text-white font-medium"
                style={`background-color: ${selectedCard.color}; border-color: ${selectedCard.color};`}
              >
                <div class="flex items-center space-x-2">
                  <span>{selectedCard.icon} {selectedCard.name}</span>
                  <div
                    class="bg-white rounded-full w-5 h-5 flex items-center justify-center"
                  >
                    <span
                      class="text-xs"
                      style={`color: ${selectedCard.color}`}
                    >
                      â†’
                    </span>
                  </div>
                </div>
              </a>

              {
                selectedCard.reqUrl && (
                  <p class="mt-3 text-sm text-left text-gray-600">
                    Want to make sure it fits?&nbsp;
                    <a
                      class="font-semibold text-blue-500 hover:underline"
                      href={selectedCard.reqUrl}
                    >
                      Review the application checklist
                    </a>
                  </p>
                )
              }
            </div>

            {
              alternateCards.length > 0 && (
                <div class="alternate-recommendations space-y-4 mb-6">
                  <h2 class="h3 text-left text-dark">
                    Looking for more options?
                  </h2>
                  {alternateCards.map((card) => (
                    <a
                      href={card.url}
                      class="btn btn-primary btn-lg w-full rounded-full inline-flex items-center justify-center text-white font-medium"
                      style={`background-color: ${card.color}; border-color: ${card.color};`}
                    >
                      <div class="flex items-center space-x-2">
                        <span>
                          {card.icon} {card.name}
                        </span>
                        <div class="bg-white rounded-full w-4 h-4 flex items-center justify-center">
                          <span class="text-xs" style={`color: ${card.color}`}>
                            â†’
                          </span>
                        </div>
                      </div>
                    </a>
                  ))}
                </div>
              )
            }

            <p class="text-left text-lg text-dark mb-4">
              Our recommendations are designed to connect your financial goals
              with cards that suit your needs. From cashback to travel rewards,
              we give you clear, easy-to-understand options so you can make
              informed decisions.
            </p>

            <!-- Autozep Ad: us_budgetbeepro_2 -->
            <div
              id="us_budgetbeepro_2"
              class="min-w-auto flex justify-center items-center"
            >
            </div>

            <p class="text-left text-lg text-dark mb-5">
              With our guide, you'll transform your credit card into a tool that
              simplifies your finances and helps you achieve your goals without
              complications.
            </p>

            <div class="mt-6 mb-4">
              <a
                href="/financial-solutions/chase-freedom-unlimited-credit-card-benefits"
                class="btn btn-primary btn-lg w-full rounded-full inline-flex items-center justify-center"
                style="background-color: #F97316; border-color: #F97316; color: white; border-radius: 50px;"
              >
                <div class="flex items-center space-x-2">
                  <span>Our Top Recommendation</span>
                  <div
                    class="bg-white rounded-full w-5 h-5 flex items-center justify-center"
                  >
                    <span class="text-orange-500 text-xs">â†’</span>
                  </div>
                </div>
              </a>
            </div>

            <p class="text-left text-lg mb-6">
              <a
                class="text-blue-500"
                href="/financial-solutions/chase-freedom-unlimited-requirements"
              >
                Learn How to Apply
              </a>
            </p>

            <!-- FAQ Section -->
            <div class="mt-6 mb-6 border rounded">
              <!-- FAQ Item 1: Benefits -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer border-b"
                data-faq="benefits"
              >
                <h3
                  class="faq-title font-medium text-lg leading-5 text-sky-600"
                >
                  What are the benefits of a card with no annual fee?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-benefits-content"
              >
                <p class="text-left">
                  A card with no annual fee helps you save on recurring costs
                  while enjoying key benefits such as cashback or points for
                  purchases.
                </p>
              </div>

              <!-- FAQ Item 2: Cashback -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer border-b"
                data-faq="cashback"
              >
                <h3
                  class="faq-title font-medium text-lg leading-5 text-sky-600"
                >
                  How does cashback work?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-cashback-content"
              >
                <p class="text-left">
                  You receive a percentage of your purchases as cash that you
                  can use to reduce balances or spend as you prefer.
                </p>
              </div>

              <!-- FAQ Item 3: Travelers -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer border-b"
                data-faq="travelers"
              >
                <h3
                  class="faq-title font-medium text-lg leading-5 text-sky-600"
                >
                  What's the best option for travelers?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-travelers-content"
              >
                <p class="text-left">
                  Cards with air miles accumulation or access to VIP lounges are
                  ideal for frequent travelers, allowing you to save on flights
                  and enjoy exclusive benefits.
                </p>
              </div>

              <!-- FAQ Item 4: Online -->
              <button
                type="button"
                class="faq-button flex justify-between items-center w-full p-4 text-left cursor-pointer"
                data-faq="online"
              >
                <h3
                  class="faq-title font-medium text-lg leading-6 text-sky-600"
                >
                  Is it safe to use credit cards online?
                </h3>
                <span class="faq-icon text-xl text-sky-700">â–¼</span>
              </button>
              <div
                class="faq-content hidden p-4 text-gray-700"
                id="faq-online-content"
              >
                <p class="text-left">
                  Yes, many cards offer advanced technology such as dynamic CVV
                  and instant alerts to protect your transactions.
                </p>
              </div>
            </div>

            <p class="text-left text-lg text-dark mb-8">
              Make your credit card an ally in achieving your financial goals.
              From cashback to travel rewards, choose an option that simplifies
              your life and maximizes your benefits. Explore our recommendations
              and find the card that best suits you.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="quiz-min-footer">
    <MinimalFooter />
  </footer>
</Base>

<style is:global>
  /* Hide any existing global footers rendered by Base (Footer/CompactFooter) */
  footer,
  .site-footer,
  .compact-footer {
    display: none !important;
  }

  /* Re-show our minimal footer on this page */
  footer.quiz-min-footer {
    display: block !important;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // FAQ functionality
    const faqButtons = document.querySelectorAll(".faq-button");
    let openFaq = "benefits"; // Default open

    // Open the benefits FAQ by default
    const defaultFaq = document.querySelector('[data-faq="benefits"]');
    const defaultContent = document.getElementById("faq-benefits-content");
    if (defaultFaq && defaultContent) {
      defaultContent.classList.remove("hidden");
      const defaultTitle = defaultFaq.querySelector(".faq-title");
      const defaultIcon = defaultFaq.querySelector(".faq-icon");
      if (defaultTitle) {
        defaultTitle.classList.add("text-green-500");
        defaultTitle.classList.remove("text-sky-600");
      }
      if (defaultIcon) {
        defaultIcon.classList.add("text-green-500", "transform", "rotate-180");
        defaultIcon.classList.remove("text-sky-700");
      }
    }

    faqButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const faqId = button.getAttribute("data-faq");
        if (!faqId) return;

        const content = document.getElementById(`faq-${faqId}-content`);
        const title = button.querySelector(".faq-title");
        const icon = button.querySelector(".faq-icon");

        if (openFaq === faqId) {
          // Close current
          if (content) content.classList.add("hidden");
          if (title) {
            title.classList.remove("text-green-500");
            title.classList.add("text-sky-600");
          }
          if (icon) {
            icon.classList.remove("text-green-500", "transform", "rotate-180");
            icon.classList.add("text-sky-700");
          }
          openFaq = "";
        } else {
          // Close previous
          if (openFaq) {
            const prevContent = document.getElementById(
              `faq-${openFaq}-content`,
            );
            const prevButton = document.querySelector(
              `[data-faq="${openFaq}"]`,
            );
            if (prevContent) prevContent.classList.add("hidden");
            if (prevButton) {
              const prevTitle = prevButton.querySelector(".faq-title");
              const prevIcon = prevButton.querySelector(".faq-icon");
              if (prevTitle) {
                prevTitle.classList.remove("text-green-500");
                prevTitle.classList.add("text-sky-600");
              }
              if (prevIcon) {
                prevIcon.classList.remove(
                  "text-green-500",
                  "transform",
                  "rotate-180",
                );
                prevIcon.classList.add("text-sky-700");
              }
            }
          }

          // Open new
          if (content) content.classList.remove("hidden");
          if (title) {
            title.classList.add("text-green-500");
            title.classList.remove("text-sky-600");
          }
          if (icon) {
            icon.classList.add("text-green-500", "transform", "rotate-180");
            icon.classList.remove("text-sky-700");
          }
          openFaq = faqId;
        }
      });
    });
  });
</script>

<style>
  .btn {
    transition: all 0.3s ease;
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .faq-button {
    transition: all 0.3s ease;
  }

  .faq-icon {
    transition:
      transform 0.3s ease,
      color 0.3s ease;
  }

  .faq-title {
    transition: color 0.3s ease;
  }

  .faq-content {
    transition: all 0.3s ease;
  }

  /* Ensure proper spacing and alignment */
  .space-y-1 > * + * {
    margin-top: 0.25rem;
  }

  .space-y-4 > * + * {
    margin-top: 1rem;
  }

  /* Mobile responsive adjustments */
  @media (max-width: 768px) {
    .btn {
      padding: 12px 20px;
      font-size: 0.875rem;
    }

    .text-lg {
      font-size: 1rem;
    }

    .text-2xl {
      font-size: 1.25rem;
    }
  }
</style>

<!-- Quiz Navigation Guard: Prevent back navigation to quiz -->
<script>
  import { installRecommenderGuard } from "@/lib/utils/quizNavigationGuard";

  // Install guard immediately
  installRecommenderGuard();

  // Re-install on Astro page transitions
  document.addEventListener("astro:page-load", () => {
    installRecommenderGuard();
  });
</script>

<!-- UTM Link Appender: Automatically append UTMs to all internal links -->
<script>
  import "@/lib/utm-link-appender";
</script>
